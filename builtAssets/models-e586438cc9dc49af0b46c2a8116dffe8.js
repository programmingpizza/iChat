var UserModel=Backbone.Model.extend(),UsersCollection=Backbone.Collection.extend({model:UserModel}),MessageModel=Backbone.Model.extend(),MessagesCollection=Backbone.Collection.extend({model:MessageModel}),FileModel=Backbone.Model.extend(),FilesCollection=Backbone.Collection.extend({model:FileModel}),RoomModel=Backbone.Model.extend({initialize:function(){this.messages=new MessagesCollection,this.users=new UsersCollection,this.files=new FilesCollection,this.lastMessage=new Backbone.Model,this.users.on("add",_.bind(function(e){this.trigger("users:add",e,this)},this)),this.users.on("remove",function(e){this.trigger("users:remove",e,this)},this)},loaded:!1}),RoomsCollection=Backbone.Collection.extend({model:RoomModel,initialize:function(){this.current=new Backbone.Model,this.last=new Backbone.Model}});